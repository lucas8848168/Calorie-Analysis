# ğŸš€ å¿«é€Ÿéƒ¨ç½²å’Œç®¡ç†æŒ‡å¼•

## ç¬¬ä¸€æ­¥ï¼šéƒ¨ç½²åº”ç”¨ï¼ˆ5åˆ†é’Ÿï¼‰

### æ–¹å¼1ï¼šä¸€é”®éƒ¨ç½²ï¼ˆæ¨èï¼‰
```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ
./deploy.sh
```

æŒ‰æç¤ºæ“ä½œï¼š
1. ä¼šè‡ªåŠ¨å®‰è£… wranglerï¼ˆå¦‚æœæ²¡æœ‰ï¼‰
2. ä¼šè¦æ±‚ä½ ç™»å½• Cloudflareï¼ˆæµè§ˆå™¨ä¼šæ‰“å¼€ï¼‰
3. è‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½² Workers API
4. é€‰æ‹©éƒ¨ç½² Pages çš„æ–¹å¼ï¼ˆå»ºè®®é€‰1ï¼‰

### æ–¹å¼2ï¼šæ‰‹åŠ¨éƒ¨ç½²
```bash
# 1. å®‰è£…å·¥å…·
npm install -g wrangler

# 2. ç™»å½•ï¼ˆä¼šæ‰“å¼€æµè§ˆå™¨ï¼‰
wrangler login

# 3. éƒ¨ç½²åç«¯ API
cd workers
wrangler deploy
cd ..

# 4. éƒ¨ç½²å‰ç«¯
wrangler pages deploy dist --project-name=food-calorie-analyzer
```

## ç¬¬äºŒæ­¥ï¼šé…ç½®ç¯å¢ƒå˜é‡ï¼ˆ2åˆ†é’Ÿï¼‰

### é…ç½® Workers API å¯†é’¥
```bash
cd workers

# è®¾ç½®è±†åŒ… API Key
wrangler secret put DOUBAO_API_KEY
# è¾“å…¥ä½ çš„ API Key åæŒ‰å›è½¦

# è®¾ç½®è±†åŒ… API Endpoint
wrangler secret put DOUBAO_API_ENDPOINT
# è¾“å…¥ API Endpoint URL åæŒ‰å›è½¦
```

### é…ç½® Pages ç¯å¢ƒå˜é‡
1. è®¿é—® https://dash.cloudflare.com
2. è¿›å…¥ **Workers & Pages**
3. æ‰¾åˆ°ä½ çš„é¡¹ç›® `food-calorie-analyzer`
4. ç‚¹å‡» **Settings** â†’ **Environment variables**
5. æ·»åŠ å˜é‡ï¼š
   - åç§°: `VITE_API_ENDPOINT`
   - å€¼: ä½ çš„ Workers URLï¼ˆä¾‹å¦‚ï¼š`https://food-analyzer-api.ä½ çš„è´¦å·.workers.dev`ï¼‰
6. ç‚¹å‡» **Save**
7. é‡æ–°éƒ¨ç½²ï¼ˆåœ¨ Deployments é¡µé¢ç‚¹å‡» Retry deploymentï¼‰

## ç¬¬ä¸‰æ­¥ï¼šè®¿é—®ä½ çš„åº”ç”¨

### è·å–åº”ç”¨ URL

**å‰ç«¯åº”ç”¨ï¼š**
- é»˜è®¤ URL: `https://food-calorie-analyzer.pages.dev`
- æˆ–è€…åœ¨éƒ¨ç½²å®Œæˆåç»ˆç«¯ä¼šæ˜¾ç¤º URL

**åç«¯ APIï¼š**
- é»˜è®¤ URL: `https://food-analyzer-api.ä½ çš„è´¦å·.workers.dev`
- æµ‹è¯• API: `curl https://food-analyzer-api.ä½ çš„è´¦å·.workers.dev/health`

### æŸ¥çœ‹ä½ çš„åº”ç”¨
```bash
# æ–¹å¼1ï¼šåœ¨ç»ˆç«¯æŸ¥çœ‹
wrangler pages deployments list --project-name=food-calorie-analyzer

# æ–¹å¼2ï¼šè®¿é—® Dashboard
# https://dash.cloudflare.com â†’ Workers & Pages
```

## ç¬¬å››æ­¥ï¼šç®¡ç†ä½ çš„åº”ç”¨

### ğŸ“Š Cloudflare Dashboardï¼ˆæ¨èï¼‰
è®¿é—®ï¼šhttps://dash.cloudflare.com

#### ç®¡ç† Pagesï¼ˆå‰ç«¯ï¼‰
1. è¿›å…¥ **Workers & Pages**
2. ç‚¹å‡»ä½ çš„é¡¹ç›® `food-calorie-analyzer`
3. å¯ä»¥çœ‹åˆ°ï¼š
   - ğŸ“ˆ **Analytics** - è®¿é—®ç»Ÿè®¡ã€æµé‡æ•°æ®
   - ğŸš€ **Deployments** - éƒ¨ç½²å†å²ã€é‡æ–°éƒ¨ç½²
   - âš™ï¸ **Settings** - ç¯å¢ƒå˜é‡ã€è‡ªå®šä¹‰åŸŸå
   - ğŸ“ **Functions** - è¾¹ç¼˜å‡½æ•°ï¼ˆå¦‚æœæœ‰ï¼‰

#### ç®¡ç† Workersï¼ˆåç«¯ APIï¼‰
1. è¿›å…¥ **Workers & Pages**
2. ç‚¹å‡» `food-analyzer-api`
3. å¯ä»¥çœ‹åˆ°ï¼š
   - ğŸ“Š **Metrics** - è¯·æ±‚æ•°ã€é”™è¯¯ç‡ã€å»¶è¿Ÿ
   - ğŸ“ **Logs** - å®æ—¶æ—¥å¿—ï¼ˆéœ€è¦å¼€å¯ï¼‰
   - âš™ï¸ **Settings** - ç¯å¢ƒå˜é‡ã€è§¦å‘å™¨
   - ğŸ”§ **Quick Edit** - åœ¨çº¿ç¼–è¾‘ä»£ç 

### ğŸ–¥ï¸ å‘½ä»¤è¡Œç®¡ç†

#### æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€
```bash
# æŸ¥çœ‹ Pages éƒ¨ç½²
wrangler pages deployments list --project-name=food-calorie-analyzer

# æŸ¥çœ‹ Workers çŠ¶æ€
cd workers
wrangler deployments list
```

#### æŸ¥çœ‹å®æ—¶æ—¥å¿—
```bash
# Workers å®æ—¶æ—¥å¿—
cd workers
wrangler tail

# ä¼šæ˜¾ç¤ºæ‰€æœ‰è¯·æ±‚å’Œé”™è¯¯
```

#### æ›´æ–°åº”ç”¨
```bash
# ä¿®æ”¹ä»£ç åé‡æ–°éƒ¨ç½²
npm run build
./deploy.sh
```

#### å›æ»šéƒ¨ç½²
```bash
# åœ¨ Dashboard ä¸­ï¼š
# Workers & Pages â†’ ä½ çš„é¡¹ç›® â†’ Deployments â†’ é€‰æ‹©å†å²ç‰ˆæœ¬ â†’ Rollback
```

### ğŸ“± å¸¸ç”¨ç®¡ç†ä»»åŠ¡

#### 1. æŸ¥çœ‹è®¿é—®ç»Ÿè®¡
- Dashboard â†’ Workers & Pages â†’ ä½ çš„é¡¹ç›® â†’ Analytics
- å¯ä»¥çœ‹åˆ°ï¼šè®¿é—®é‡ã€å¸¦å®½ä½¿ç”¨ã€åœ°ç†åˆ†å¸ƒ

#### 2. é…ç½®è‡ªå®šä¹‰åŸŸå
- Dashboard â†’ Workers & Pages â†’ ä½ çš„é¡¹ç›® â†’ Custom domains
- ç‚¹å‡» **Set up a custom domain**
- è¾“å…¥åŸŸåï¼ˆä¾‹å¦‚ï¼šfood.yourdomain.comï¼‰
- æŒ‰æç¤ºé…ç½® DNS

#### 3. æŸ¥çœ‹é”™è¯¯æ—¥å¿—
```bash
# å®æ—¶æŸ¥çœ‹ Workers æ—¥å¿—
cd workers
wrangler tail

# æˆ–åœ¨ Dashboard ä¸­æŸ¥çœ‹
# Workers & Pages â†’ food-analyzer-api â†’ Logs
```

#### 4. æ›´æ–°ç¯å¢ƒå˜é‡
```bash
# æ›´æ–° Workers å¯†é’¥
cd workers
wrangler secret put DOUBAO_API_KEY

# æ›´æ–° Pages ç¯å¢ƒå˜é‡
# åœ¨ Dashboard ä¸­æ“ä½œæ›´æ–¹ä¾¿
```

#### 5. æš‚åœ/åˆ é™¤åº”ç”¨
```bash
# åˆ é™¤ Pages é¡¹ç›®
wrangler pages project delete food-calorie-analyzer

# åˆ é™¤ Workers
cd workers
wrangler delete
```

## ğŸ” ç›‘æ§å’Œè°ƒè¯•

### æ£€æŸ¥åº”ç”¨å¥åº·çŠ¶æ€
```bash
# æµ‹è¯• Workers API
curl https://food-analyzer-api.ä½ çš„è´¦å·.workers.dev/health

# åº”è¯¥è¿”å›ï¼š
# {"status":"ok","timestamp":"..."}
```

### æŸ¥çœ‹æ€§èƒ½æŒ‡æ ‡
Dashboard â†’ Workers & Pages â†’ ä½ çš„é¡¹ç›® â†’ Metrics
- è¯·æ±‚æ•°/ç§’
- å“åº”æ—¶é—´
- é”™è¯¯ç‡
- CPU ä½¿ç”¨æ—¶é—´

### è°ƒè¯•é—®é¢˜
```bash
# 1. æŸ¥çœ‹å®æ—¶æ—¥å¿—
cd workers
wrangler tail

# 2. æœ¬åœ°æµ‹è¯•
npm run dev  # å‰ç«¯
cd workers && npm run dev  # åç«¯

# 3. æ£€æŸ¥ç¯å¢ƒå˜é‡
wrangler secret list
```

## ğŸ“ å¿«é€Ÿé“¾æ¥

### Cloudflare Dashboard
- ä¸»é¡µ: https://dash.cloudflare.com
- Workers & Pages: https://dash.cloudflare.com/?to=/:account/workers-and-pages
- Analytics: https://dash.cloudflare.com/?to=/:account/analytics

### æ–‡æ¡£
- Workers æ–‡æ¡£: https://developers.cloudflare.com/workers/
- Pages æ–‡æ¡£: https://developers.cloudflare.com/pages/
- Wrangler CLI: https://developers.cloudflare.com/workers/wrangler/

### ä½ çš„åº”ç”¨
- å‰ç«¯: https://food-calorie-analyzer.pages.dev
- API: https://food-analyzer-api.ä½ çš„è´¦å·.workers.dev
- Dashboard: https://dash.cloudflare.com

## âš¡ å¸¸è§æ“ä½œé€ŸæŸ¥

```bash
# éƒ¨ç½²
./deploy.sh

# æŸ¥çœ‹æ—¥å¿—
cd workers && wrangler tail

# æ›´æ–°ä»£ç 
npm run build && ./deploy.sh

# æŸ¥çœ‹éƒ¨ç½²åˆ—è¡¨
wrangler pages deployments list --project-name=food-calorie-analyzer

# è®¾ç½®ç¯å¢ƒå˜é‡
cd workers && wrangler secret put DOUBAO_API_KEY

# æœ¬åœ°å¼€å‘
npm run dev  # å‰ç«¯ http://localhost:5173
cd workers && npm run dev  # åç«¯ http://localhost:8787
```

## ğŸ¯ ä¸‹ä¸€æ­¥

1. âœ… è¿è¡Œ `./deploy.sh` å®Œæˆéƒ¨ç½²
2. âœ… é…ç½®ç¯å¢ƒå˜é‡
3. âœ… è®¿é—®ä½ çš„åº”ç”¨ URL
4. âœ… åœ¨ Dashboard æŸ¥çœ‹ç»Ÿè®¡æ•°æ®
5. âœ… åˆ†äº«ç»™æœ‹å‹ä½¿ç”¨ï¼

**ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰
